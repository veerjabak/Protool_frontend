{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\veer jabak\\\\Desktop\\\\Project_Management_Tool-master\\\\frontend\\\\src\\\\components\\\\ModifyProject.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport projectContext from '../context/project/projectContext';\nimport SearchAndSelect from './SearchAndSelect';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ModifyProject = props => {\n  _s();\n  let navigate = useNavigate();\n  const context = useContext(projectContext);\n  const {\n    userIdToEmail,\n    users,\n    fetchUsers\n  } = context;\n  const params = useParams();\n  const [projectId] = useState(params.projectId);\n  const [admin, setAdmin] = useState([]);\n  const [developers, setDevelopers] = useState([]);\n  const [projectName, setProjectName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const fetchProject = async () => {\n    const response = await fetch(`http://localhost:5000/api/project/get-project/${projectId}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'auth-token': localStorage.getItem('token')\n      }\n    });\n    const proj = await response.json();\n\n    // changing \"user-id\" to \"user-name\"\n    proj.createdBy = userIdToEmail(proj.createdBy);\n    for (let index = 0; index < proj.admin.length; index++) {\n      proj.admin[index] = userIdToEmail(proj.admin[index]);\n    }\n    for (let index = 0; index < proj.developers.length; index++) {\n      proj.developers[index] = userIdToEmail(proj.developers[index]);\n    }\n    setAdmin(proj.admin);\n    setDevelopers(proj.developers);\n    setProjectName(proj.projectName);\n    setDescription(proj.description);\n  };\n  const handleOnChange = e => {\n    if (e.target.name === \"projectName\") setProjectName(e.target.value);\n    if (e.target.name === \"description\") setDescription(e.target.value);\n  };\n  const handleFormSubmit = async e => {\n    e.preventDefault();\n    const response = await fetch(\"http://localhost:5000/api/project/modify-project\", {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'auth-token': localStorage.getItem('token')\n      },\n      body: JSON.stringify({\n        projectId,\n        projectName,\n        description,\n        admin,\n        developers\n      })\n    });\n    const json = await response.json();\n    console.log(json);\n    navigate(`/project/${projectId}`);\n    props.showAlert(\"Project Modified Successfully\", \"success\");\n    // if (json.success){\n    //     navigate(\"/home\");\n    //     props.showAlert(\"Project Created Successfully\", \"success\")\n    // }\n    // else{\n    //     props.showAlert(\"Invalid Credentials\", \"danger\")\n    // }\n  };\n\n  useEffect(() => {\n    if (users.length === 0) fetchUsers();\n    fetchProject();\n    // eslint-disable-next-line\n  }, [users]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header inline\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"float-start\",\n          children: \"MODIFY PROJECT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleFormSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container border border-1 rounded m-3 p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"exampleInputEmail1\",\n              className: \"form-label\",\n              children: \"Name of Project\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              disabled: true,\n              type: \"text\",\n              className: \"form-control\",\n              name: \"projectName\",\n              value: projectName,\n              onChange: handleOnChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container border border-1 rounded m-3 p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"exampleInputEmail1\",\n              className: \"form-label\",\n              children: \"Description of Project\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"description\",\n              value: description,\n              onChange: handleOnChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SearchAndSelect, {\n            nameOfArray: \"ADMIN\",\n            buildArray: admin,\n            setBuildArray: setAdmin\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SearchAndSelect, {\n            nameOfArray: \"DEVELOPER\",\n            buildArray: developers,\n            setBuildArray: setDevelopers\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"UPDATE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(ModifyProject, \"fzF/ewIZsqwXA6vPUAOyUF4jZok=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = ModifyProject;\nexport default ModifyProject;\nvar _c;\n$RefreshReg$(_c, \"ModifyProject\");","map":{"version":3,"names":["React","useEffect","useState","useContext","projectContext","SearchAndSelect","useNavigate","useParams","jsxDEV","_jsxDEV","ModifyProject","props","_s","navigate","context","userIdToEmail","users","fetchUsers","params","projectId","admin","setAdmin","developers","setDevelopers","projectName","setProjectName","description","setDescription","fetchProject","response","fetch","method","headers","localStorage","getItem","proj","json","createdBy","index","length","handleOnChange","e","target","name","value","handleFormSubmit","preventDefault","body","JSON","stringify","console","log","showAlert","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","disabled","type","onChange","nameOfArray","buildArray","setBuildArray","_c","$RefreshReg$"],"sources":["C:/Users/veer jabak/Desktop/Project_Management_Tool-master/frontend/src/components/ModifyProject.js"],"sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport projectContext from '../context/project/projectContext';\nimport SearchAndSelect from './SearchAndSelect';\nimport { useNavigate, useParams } from 'react-router-dom'\n\nconst ModifyProject = (props) => {\n    let navigate = useNavigate();\n\n    const context = useContext(projectContext);\n    const {userIdToEmail, users, fetchUsers} = context;\n\n    const params = useParams();\n    const [projectId] = useState(params.projectId)\n    const [admin, setAdmin] = useState([])\n    const [developers, setDevelopers] = useState([])\n    const [projectName, setProjectName] = useState(\"\")\n    const [description, setDescription] = useState(\"\")\n\n    const fetchProject = async()=>{\n      const response = await fetch(`http://localhost:5000/api/project/get-project/${projectId}`, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'auth-token' : localStorage.getItem('token')\n        }\n      });\n      const proj = await response.json();\n\n      // changing \"user-id\" to \"user-name\"\n      proj.createdBy = userIdToEmail(proj.createdBy);\n      for (let index = 0; index < proj.admin.length; index++) {\n        proj.admin[index] = userIdToEmail(proj.admin[index]);\n      }\n      for (let index = 0; index < proj.developers.length; index++) {\n        proj.developers[index] = userIdToEmail(proj.developers[index]);\n      }\n      setAdmin(proj.admin)\n      setDevelopers(proj.developers)\n      setProjectName(proj.projectName)\n      setDescription(proj.description)\n    }\n\n    const handleOnChange = (e)=>{\n      if(e.target.name === \"projectName\") setProjectName(e.target.value);\n      if(e.target.name === \"description\") setDescription(e.target.value);\n      \n    }\n\n    const handleFormSubmit = async (e) => {\n      e.preventDefault();\n      const response = await fetch(\"http://localhost:5000/api/project/modify-project\", {\n          method: 'PUT',\n          headers: {\n              'Content-Type': 'application/json',\n              'auth-token': localStorage.getItem('token')\n          },\n          body: JSON.stringify({projectId , projectName, description, admin, developers})\n      });\n      const json = await response.json()\n      console.log(json);\n      navigate(`/project/${projectId}`);\n      props.showAlert(\"Project Modified Successfully\", \"success\")\n      // if (json.success){\n      //     navigate(\"/home\");\n      //     props.showAlert(\"Project Created Successfully\", \"success\")\n      // }\n      // else{\n      //     props.showAlert(\"Invalid Credentials\", \"danger\")\n      // }\n  }\n\n    useEffect(() => {\n      if(users.length === 0) fetchUsers();\n      fetchProject();\n      // eslint-disable-next-line\n    }, [users])\n    \n  return (\n    <div>\n        <div className=\"card\">\n          <div className=\"card-header inline\">\n            <h5 className='float-start'>MODIFY PROJECT</h5>\n          </div>\n\n          <div className=\"card-body\"> \n            <form onSubmit={handleFormSubmit}>\n              <div className=\"container border border-1 rounded m-3 p-3\">\n                <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">Name of Project</label>\n                <input disabled type=\"text\" className=\"form-control\" name=\"projectName\" value={projectName} onChange={handleOnChange}/>\n              </div>\n              \n              <div className=\"container border border-1 rounded m-3 p-3\">\n                <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">Description of Project</label>\n                <input type=\"text\" className=\"form-control\" name=\"description\" value={description} onChange={handleOnChange}/>\n              </div>\n\n              <SearchAndSelect nameOfArray={\"ADMIN\"} buildArray={admin} setBuildArray={setAdmin} />\n              <SearchAndSelect nameOfArray={\"DEVELOPER\"} buildArray={developers} setBuildArray={setDevelopers} />\n          \n              <button type=\"submit\" className=\"btn btn-primary\">UPDATE</button>\n            </form>\n          </div>\n        </div>\n    </div>\n  )\n}\n\nexport default ModifyProject"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}