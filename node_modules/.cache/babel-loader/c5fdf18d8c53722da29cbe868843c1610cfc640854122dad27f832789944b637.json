{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\veer jabak\\\\Desktop\\\\Project_Management_Tool-master\\\\frontend\\\\src\\\\components\\\\KanbanSection.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport KanbanTicket from \"./KanbanTicket\";\nimport { useDrop } from \"react-dnd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst KanbanSection = props => {\n  _s();\n  const {\n    specifictickets,\n    sectionName,\n    setTickets\n  } = props;\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: \"ticket\",\n    drop: item => addItemToSection(item),\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  const addItemToSection = async item => {\n    const newStatus = sectionName;\n    const response = await fetch(`https://protool-backend-deployment.onrender.com/api/project/update-ticket-status/${item.id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"auth-token\": localStorage.getItem(\"token\")\n      },\n      body: JSON.stringify({\n        newStatus\n      })\n    });\n    const res = await response.json();\n    console.log(res);\n\n    //console.log(\"dropped\", item.id, sectionName, tickets);\n    // const mTickets = tickets.map( it => {\n    //     if(it._id === item.id){\n    //         console.log(\"found\", it.ticketNumber, it.ticketType, sectionName);\n    //         return {...it, ticketType: sectionName};\n    //     }\n    //     return it;\n    // })\n    // setTickets(mTickets);\n\n    setTickets(prevState => {\n      const newState = prevState.map(it => {\n        if (it._id === item.id) {\n          return {\n            ...it,\n            ticketStatus: sectionName\n          };\n        }\n        return it;\n      });\n      return newState;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drop,\n    className: `col-md-3 float-left border rounded ${isOver ? \"bg-light\" : \"\"} `,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: sectionName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), Object.values(specifictickets).map(it => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(KanbanTicket, {\n          ticket: it\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)\n      }, it._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(KanbanSection, \"9166pYLrZ/JzF75YDim8ZjfICTM=\", false, function () {\n  return [useDrop];\n});\n_c = KanbanSection;\nexport default KanbanSection;\nvar _c;\n$RefreshReg$(_c, \"KanbanSection\");","map":{"version":3,"names":["React","KanbanTicket","useDrop","jsxDEV","_jsxDEV","KanbanSection","props","_s","specifictickets","sectionName","setTickets","isOver","drop","accept","item","addItemToSection","collect","monitor","newStatus","response","fetch","id","method","headers","localStorage","getItem","body","JSON","stringify","res","json","console","log","prevState","newState","map","it","_id","ticketStatus","ref","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Object","values","ticket","_c","$RefreshReg$"],"sources":["C:/Users/veer jabak/Desktop/Project_Management_Tool-master/frontend/src/components/KanbanSection.js"],"sourcesContent":["import React from \"react\";\nimport KanbanTicket from \"./KanbanTicket\";\nimport { useDrop } from \"react-dnd\";\n\nconst KanbanSection = (props) => {\n  const { specifictickets, sectionName, setTickets } = props;\n\n  const [{ isOver }, drop] = useDrop(() => ({\n    accept: \"ticket\",\n    drop: (item) => addItemToSection(item),\n    collect: (monitor) => ({\n      isOver: !!monitor.isOver(),\n    }),\n  }));\n\n  const addItemToSection = async (item) => {\n    const newStatus = sectionName;\n    const response = await fetch(\n      `https://protool-backend-deployment.onrender.com/api/project/update-ticket-status/${item.id}`,\n      {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": localStorage.getItem(\"token\"),\n        },\n        body: JSON.stringify({ newStatus }),\n      }\n    );\n    const res = await response.json();\n    console.log(res);\n\n    //console.log(\"dropped\", item.id, sectionName, tickets);\n    // const mTickets = tickets.map( it => {\n    //     if(it._id === item.id){\n    //         console.log(\"found\", it.ticketNumber, it.ticketType, sectionName);\n    //         return {...it, ticketType: sectionName};\n    //     }\n    //     return it;\n    // })\n    // setTickets(mTickets);\n\n    setTickets((prevState) => {\n      const newState = prevState.map((it) => {\n        if (it._id === item.id) {\n          return { ...it, ticketStatus: sectionName };\n        }\n        return it;\n      });\n      return newState;\n    });\n  };\n\n  return (\n    <div\n      ref={drop}\n      className={`col-md-3 float-left border rounded ${\n        isOver ? \"bg-light\" : \"\"\n      } `}\n    >\n      <div>{sectionName}</div>\n      {Object.values(specifictickets).map((it) => {\n        return (\n          <div key={it._id}>\n            <KanbanTicket ticket={it} />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default KanbanSection;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,gBAAgB;AACzC,SAASC,OAAO,QAAQ,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,aAAa,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAC/B,MAAM;IAAEC,eAAe;IAAEC,WAAW;IAAEC;EAAW,CAAC,GAAGJ,KAAK;EAE1D,MAAM,CAAC;IAAEK;EAAO,CAAC,EAAEC,IAAI,CAAC,GAAGV,OAAO,CAAC,OAAO;IACxCW,MAAM,EAAE,QAAQ;IAChBD,IAAI,EAAGE,IAAI,IAAKC,gBAAgB,CAACD,IAAI,CAAC;IACtCE,OAAO,EAAGC,OAAO,KAAM;MACrBN,MAAM,EAAE,CAAC,CAACM,OAAO,CAACN,MAAM,CAAC;IAC3B,CAAC;EACH,CAAC,CAAC,CAAC;EAEH,MAAMI,gBAAgB,GAAG,MAAOD,IAAI,IAAK;IACvC,MAAMI,SAAS,GAAGT,WAAW;IAC7B,MAAMU,QAAQ,GAAG,MAAMC,KAAK,CACzB,oFAAmFN,IAAI,CAACO,EAAG,EAAC,EAC7F;MACEC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,YAAY,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;MAC5C,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEV;MAAU,CAAC;IACpC,CACF,CAAC;IACD,MAAMW,GAAG,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;IACjCC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;;IAEhB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEAnB,UAAU,CAAEuB,SAAS,IAAK;MACxB,MAAMC,QAAQ,GAAGD,SAAS,CAACE,GAAG,CAAEC,EAAE,IAAK;QACrC,IAAIA,EAAE,CAACC,GAAG,KAAKvB,IAAI,CAACO,EAAE,EAAE;UACtB,OAAO;YAAE,GAAGe,EAAE;YAAEE,YAAY,EAAE7B;UAAY,CAAC;QAC7C;QACA,OAAO2B,EAAE;MACX,CAAC,CAAC;MACF,OAAOF,QAAQ;IACjB,CAAC,CAAC;EACJ,CAAC;EAED,oBACE9B,OAAA;IACEmC,GAAG,EAAE3B,IAAK;IACV4B,SAAS,EAAG,sCACV7B,MAAM,GAAG,UAAU,GAAG,EACvB,GAAG;IAAA8B,QAAA,gBAEJrC,OAAA;MAAAqC,QAAA,EAAMhC;IAAW;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EACvBC,MAAM,CAACC,MAAM,CAACvC,eAAe,CAAC,CAAC2B,GAAG,CAAEC,EAAE,IAAK;MAC1C,oBACEhC,OAAA;QAAAqC,QAAA,eACErC,OAAA,CAACH,YAAY;UAAC+C,MAAM,EAAEZ;QAAG;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC,GADpBT,EAAE,CAACC,GAAG;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEX,CAAC;IAEV,CAAC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAACtC,EAAA,CAjEIF,aAAa;EAAA,QAGUH,OAAO;AAAA;AAAA+C,EAAA,GAH9B5C,aAAa;AAmEnB,eAAeA,aAAa;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}