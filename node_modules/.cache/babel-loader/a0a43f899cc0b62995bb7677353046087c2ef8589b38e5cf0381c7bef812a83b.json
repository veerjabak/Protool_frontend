{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\veer jabak\\\\Desktop\\\\Project_Management_Tool-master\\\\frontend\\\\src\\\\components\\\\ModifySprint.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport projectContext from '../context/project/projectContext';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport TicketItem from './TicketItem';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ModifySprint = props => {\n  _s();\n  const params = useParams();\n  let navigate = useNavigate();\n  const context = useContext(projectContext);\n  const {\n    users,\n    fetchUsers\n  } = context;\n  const [tickets, setTickets] = useState([]);\n  const [checkedTickets, setCheckedTickets] = useState([]);\n  const [sprint, setSprint] = useState([]);\n  const handleFormSubmit = async e => {\n    e.preventDefault();\n    const response = await fetch(`http://localhost:5000/api/sprint/modify-sprint/${params.sprintId}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'auth-token': localStorage.getItem('token')\n      },\n      body: JSON.stringify({\n        tickets: checkedTickets\n      })\n    });\n    const json = await response.json();\n    console.log(json);\n    if (json.success) {\n      props.showAlert(\"Sprint Modified Successfully\", \"success\");\n      navigate(`/project/${params.projectId}`);\n    } else {\n      props.showAlert(\"Invalid Credentials\", \"danger\");\n    }\n  };\n  const fetchSprint = async () => {\n    const response = await fetch(`http://localhost:5000/api/sprint/${params.sprintId}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'auth-token': localStorage.getItem('token')\n      }\n    });\n    const spr = await response.json();\n    setSprint(spr);\n  };\n  const fetchTickets = async () => {\n    const response = await fetch(`http://localhost:5000/api/project/get-all-tickets/${params.projectId}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'auth-token': localStorage.getItem('token')\n      }\n    });\n    let tick = await response.json();\n    tick = tick.filter(it => it.currentSprint === null);\n    setTickets(tick);\n    console.log(\"Ticket Fetched\", tick);\n  };\n\n  // Add/Remove checked item from list\n  const handleCheck = e => {\n    var updatedList = [...checkedTickets];\n    if (e.target.checked) {\n      updatedList = [...checkedTickets, e.target.value];\n    } else {\n      updatedList.splice(checkedTickets.indexOf(e.target.value), 1);\n    }\n    setCheckedTickets(updatedList);\n  };\n  useEffect(() => {\n    if (users.length === 0) fetchUsers();\n    fetchTickets();\n    fetchSprint();\n    // eslint-disable-next-line\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header inline\",\n      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"float-start\",\n        children: \"MODIFY SPRINT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleFormSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container border border-1 rounded m-3 p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Name of Sprint\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            disabled: true,\n            type: \"text\",\n            className: \"form-control\",\n            name: \"SprintName\",\n            value: sprint.sprintName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container border border-1 rounded m-3 p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Tickets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, this), tickets.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"None of tickets are created\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 19\n          }, this) : tickets.map(it => {\n            return /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"d-inline-flex align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: it._id,\n                type: \"checkbox\",\n                onChange: handleCheck\n              }, it._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(TicketItem, {\n                ticket: it\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 27\n              }, this)]\n            }, it._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 23\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"UPDATE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n_s(ModifySprint, \"bA36YPa7CbGyHW/hNOQxc7KapYM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ModifySprint;\nexport default ModifySprint;\nvar _c;\n$RefreshReg$(_c, \"ModifySprint\");","map":{"version":3,"names":["React","useEffect","useState","useContext","projectContext","useNavigate","useParams","TicketItem","DatePicker","jsxDEV","_jsxDEV","ModifySprint","props","_s","params","navigate","context","users","fetchUsers","tickets","setTickets","checkedTickets","setCheckedTickets","sprint","setSprint","handleFormSubmit","e","preventDefault","response","fetch","sprintId","method","headers","localStorage","getItem","body","JSON","stringify","json","console","log","success","showAlert","projectId","fetchSprint","spr","fetchTickets","tick","filter","it","currentSprint","handleCheck","updatedList","target","checked","value","splice","indexOf","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","disabled","type","name","sprintName","map","_id","onChange","ticket","_c","$RefreshReg$"],"sources":["C:/Users/veer jabak/Desktop/Project_Management_Tool-master/frontend/src/components/ModifySprint.js"],"sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport projectContext from '../context/project/projectContext';\nimport { useNavigate, useParams } from 'react-router-dom'\nimport TicketItem from './TicketItem';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\n\nconst ModifySprint = (props) => {\n    \n    const params = useParams();\n    let navigate = useNavigate();\n    const context = useContext(projectContext);\n    const {users, fetchUsers} = context;\n    const [tickets, setTickets] = useState([])\n    const [checkedTickets, setCheckedTickets] = useState([])\n    const [sprint, setSprint] = useState([])\n\n    const handleFormSubmit = async (e) => {\n      e.preventDefault();\n      const response = await fetch(`http://localhost:5000/api/sprint/modify-sprint/${params.sprintId}`, {\n          method: 'PUT',\n          headers: {\n              'Content-Type': 'application/json',\n              'auth-token': localStorage.getItem('token')\n          },\n          body: JSON.stringify({ tickets:checkedTickets})\n      });\n      const json = await response.json()\n      console.log(json);\n      if (json.success){\n        props.showAlert(\"Sprint Modified Successfully\", \"success\")\n        navigate(`/project/${params.projectId}`);\n      }\n      else{\n          props.showAlert(\"Invalid Credentials\", \"danger\")\n      }\n    }\n\n    const fetchSprint = async()=>{\n        const response = await fetch(`http://localhost:5000/api/sprint/${params.sprintId}`, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'auth-token' : localStorage.getItem('token')\n        }\n        });\n        const spr = await response.json();\n        setSprint(spr)\n      }\n\n    const fetchTickets = async()=>{\n      const response = await fetch(`http://localhost:5000/api/project/get-all-tickets/${params.projectId}`, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'auth-token' : localStorage.getItem('token')\n        }\n      });\n      let tick = await response.json();\n      tick = tick.filter( it => it.currentSprint === null )\n      setTickets(tick);\n      console.log(\"Ticket Fetched\", tick)\n    }\n\n    // Add/Remove checked item from list\n    const handleCheck = (e) => {\n      var updatedList = [...checkedTickets];\n      if (e.target.checked) {\n        updatedList = [...checkedTickets, e.target.value];\n      } else {\n        updatedList.splice(checkedTickets.indexOf(e.target.value), 1);\n      }\n      setCheckedTickets(updatedList);\n    };\n\n    useEffect(() => {\n      if(users.length === 0) fetchUsers();\n      fetchTickets();\n      fetchSprint();\n      // eslint-disable-next-line\n    }, [])\n    \n  return (\n        <div className=\"card\">\n        <div className=\"card-header inline\">\n          <h5 className='float-start'>MODIFY SPRINT</h5>\n        </div>\n\n        <div className=\"card-body\">\n            <form onSubmit={handleFormSubmit}>\n\n              <div className=\"container border border-1 rounded m-3 p-3\">\n                <label className=\"form-label\">Name of Sprint</label>\n                <input disabled type=\"text\" className=\"form-control\" name=\"SprintName\" value={sprint.sprintName}/>\n              </div>\n\n              <div className=\"container border border-1 rounded m-3 p-3\">\n                <label className=\"form-label\">Tickets</label>\n                <br></br>\n                {\n                  tickets.length===0\n                  ?\n                  <div>None of tickets are created</div>\n                  :\n                  tickets.map((it)=>{\n                    return(\n                      <label key={it._id} className=\"d-inline-flex align-items-center\" >\n                          <input key={it._id} value={it._id} type=\"checkbox\" onChange={handleCheck} />\n                          <TicketItem  ticket={it} />\n                      </label>\n                    )\n                  })\n                }\n              </div>\n\n              <button type=\"submit\" className=\"btn btn-primary\">UPDATE</button>\n            </form>\n        </div>\n    </div>\n    )\n}\n\nexport default ModifySprint"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}